{
  "table": "tp",
  "commands": [
    {
      "type": "ADD_PROJECTION",
      "projection": {
        "name": "uniq_city_proj",
        "select": {
          "columns": [
            {
              "parts": [
                "type"
              ]
            },
            {
              "name": "uniq",
              "arguments": [
                {
                  "name": "cityHash64",
                  "arguments": [
                    {
                      "parts": [
                        "device"
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "name": "sum",
              "arguments": [
                {
                  "parts": [
                    "cnt"
                  ]
                }
              ]
            }
          ],
          "group_by": [
            {
              "parts": [
                "type"
              ]
            }
          ]
        }
      }
    }
  ]
}
